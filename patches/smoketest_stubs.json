{
  "ticket": "SMK-001-001",
  "file": "smoketest.md",
  "patch_unified": "--- /dev/null\n+++ smoketest.md\n@@ -0,0 +1 @@\n+new workflow smoketest\n",
  "description": "Create smoketest.md file to validate the patch-based subagent workflow (planner → skeletoner → implementer → integrator). This minimal file creation task serves as a smoke test to confirm the integration pipeline can successfully apply patches, track changes via git, and verify postconditions without side effects.",
  "context": "References SMK-001 spec at /home/donaldshen27/projects/donald_trading_model/docs/planning/spec.md. Work item SMK-001-001 from tickets/work_items.json defines a trivial file_creation task with hardcoded content 'new workflow smoketest\\n'. Contract specifies: file_path at repository root, UTF-8 encoding, 0644 permissions, exactly one newline terminator. Postconditions require file existence, exact content match, git tracking, and no modifications to existing files (invariant). This aligns with AD-1 (single file approach) and AD-2 (root-level placement) from the spec.",
  "notes": "This patch creates a new file from scratch (no prior existence). Unified diff includes standard headers: '--- /dev/null' for non-existent source and '+++ smoketest.md' for target file. The '@@ -0,0 +1 @@' hunk header indicates zero lines in original and one line added at position 1. Content is exactly 'new workflow smoketest' followed by POSIX-compliant newline. No logic, imports, or dependencies required. This stub represents the complete implementation for the smoketest ticket.",
  "tests": [
    {
      "description": "Verification commands for SMK-001-001 postconditions",
      "commands": [
        {
          "name": "verify_file_exists",
          "command": "test -f /home/donaldshen27/projects/donald_trading_model/smoketest.md",
          "expected_exit_code": 0,
          "description": "Confirms smoketest.md exists on filesystem"
        },
        {
          "name": "verify_content_exact",
          "command": "[ \"$(cat /home/donaldshen27/projects/donald_trading_model/smoketest.md)\" = \"new workflow smoketest\" ]",
          "expected_exit_code": 0,
          "description": "Validates content matches exactly 'new workflow smoketest' with POSIX newline"
        },
        {
          "name": "verify_git_tracking",
          "command": "git -C /home/donaldshen27/projects/donald_trading_model status --short | grep -q \"^?? smoketest.md$\" || git -C /home/donaldshen27/projects/donald_trading_model ls-files --error-unmatch smoketest.md >/dev/null 2>&1",
          "expected_exit_code": 0,
          "description": "Confirms smoketest.md appears in git status (untracked) or is staged/committed"
        },
        {
          "name": "verify_only_one_file",
          "command": "[ $(git -C /home/donaldshen27/projects/donald_trading_model status --short | wc -l) -eq 1 ]",
          "expected_exit_code": 0,
          "description": "Enforces contract invariant: only smoketest.md appears in git status"
        },
        {
          "name": "verify_no_modifications",
          "command": "[ $(git -C /home/donaldshen27/projects/donald_trading_model diff --name-only | wc -l) -eq 0 ]",
          "expected_exit_code": 0,
          "description": "Ensures no existing tracked files were modified"
        }
      ]
    }
  ]
}
